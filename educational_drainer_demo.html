<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‚ö†Ô∏è √âDUCATIF - D√©monstration Drainer (TESTNET)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&display=swap');
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'JetBrains Mono', monospace;
            background: linear-gradient(135deg, #ff0000, #ff4500, #ff6600);
            color: white;
            min-height: 100vh;
            padding: 20px;
        }

        .warning-banner {
            background: #ff0000;
            border: 3px solid #ffff00;
            padding: 20px;
            margin-bottom: 30px;
            text-align: center;
            font-size: 1.2rem;
            font-weight: bold;
            animation: blink 1s infinite;
        }

        @keyframes blink {
            0%, 50% { opacity: 1; }
            51%, 100% { opacity: 0.7; }
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: rgba(0, 0, 0, 0.8);
            border: 3px solid #ff6600;
            padding: 30px;
            border-radius: 10px;
        }

        .section {
            margin: 30px 0;
            padding: 20px;
            background: rgba(255, 102, 0, 0.1);
            border: 2px solid #ff6600;
            border-radius: 8px;
        }

        .code-block {
            background: #1a1a1a;
            border: 2px solid #333;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
            overflow-x: auto;
        }

        .demo-button {
            background: linear-gradient(45deg, #ff0000, #ff6600);
            color: white;
            border: 3px solid #ffff00;
            padding: 15px 30px;
            font-size: 1.1rem;
            font-weight: bold;
            cursor: pointer;
            margin: 15px 10px;
            border-radius: 5px;
            font-family: 'JetBrains Mono', monospace;
            transition: all 0.3s;
        }

        .demo-button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 20px #ff6600;
        }

        .demo-button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
        }

        .status-panel {
            background: #000;
            border: 2px solid #00ff00;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            min-height: 100px;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9rem;
        }

        .log-entry {
            margin: 5px 0;
            padding: 5px;
        }

        .log-info { color: #00ff00; }
        .log-warning { color: #ffff00; }
        .log-error { color: #ff0000; }
        .log-success { color: #00ffff; }

        .wallet-info {
            background: rgba(0, 255, 255, 0.1);
            border: 2px solid #00ffff;
            padding: 15px;
            margin: 15px 0;
            border-radius: 5px;
        }

        .balance-display {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 15px;
            margin: 20px 0;
        }

        .balance-item {
            background: rgba(255, 255, 255, 0.1);
            border: 2px solid #666;
            padding: 15px;
            text-align: center;
            border-radius: 5px;
        }

        .educational-note {
            background: rgba(0, 255, 0, 0.1);
            border: 2px solid #00ff00;
            padding: 15px;
            margin: 20px 0;
            border-radius: 5px;
            font-size: 0.9rem;
        }

        .attack-simulation {
            background: rgba(255, 0, 0, 0.2);
            border: 3px solid #ff0000;
            padding: 20px;
            margin: 20px 0;
            border-radius: 8px;
        }

        .hidden { display: none; }
    </style>
</head>
<body>
    <div class="warning-banner">
        ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è CECI EST UNE D√âMONSTRATION √âDUCATIVE - TESTNET UNIQUEMENT ‚ö†Ô∏è‚ö†Ô∏è‚ö†Ô∏è<br>
        NE JAMAIS UTILISER SUR MAINNET - FONDS R√âELS EN DANGER !
    </div>

    <div class="container">
        <h1 style="text-align: center; margin-bottom: 30px; color: #ff6600;">
            üéì D√âMONSTRATION √âDUCATIVE : DRAINER SOLANA
        </h1>

        <!-- Section 1: Avertissements -->
        <div class="section">
            <h2>‚ö†Ô∏è AVERTISSEMENTS IMPORTANTS</h2>
            <div class="educational-note">
                <strong>üéØ OBJECTIFS √âDUCATIFS :</strong><br>
                ‚Ä¢ Comprendre comment fonctionnent les attaques de drainers<br>
                ‚Ä¢ Apprendre √† identifier les signaux d'alarme<br>
                ‚Ä¢ Tester les m√©canismes de protection des wallets<br>
                ‚Ä¢ Sensibiliser √† la s√©curit√© blockchain<br><br>
                
                <strong>üö´ √Ä NE JAMAIS FAIRE :</strong><br>
                ‚Ä¢ Utiliser ce code sur mainnet<br>
                ‚Ä¢ Attaquer de vrais utilisateurs<br>
                ‚Ä¢ D√©ployer sans autorisation<br>
                ‚Ä¢ Voler de vrais fonds
            </div>
        </div>

        <!-- Section 2: Configuration -->
        <div class="section">
            <h2>üîß CONFIGURATION TESTNET</h2>
            <div class="wallet-info" id="walletStatus">
                <p><strong>Statut :</strong> <span id="connectionStatus">Non connect√©</span></p>
                <p><strong>R√©seau :</strong> <span id="networkStatus">Inconnu</span></p>
                <p><strong>Adresse :</strong> <span id="walletAddress">-</span></p>
            </div>
            
            <button class="demo-button" id="connectWallet">üîó CONNECTER WALLET (TESTNET)</button>
            <button class="demo-button" id="checkBalances" disabled>üí∞ V√âRIFIER SOLDES</button>
            <button class="demo-button" id="requestAirdrop" disabled>ü™Ç DEMANDER AIRDROP TEST</button>
        </div>

        <!-- Section 3: Balances -->
        <div class="section">
            <h2>üí∞ SOLDES TESTNET</h2>
            <div class="balance-display">
                <div class="balance-item">
                    <h3>SOL</h3>
                    <p id="solBalance">0.00</p>
                </div>
                <div class="balance-item">
                    <h3>Test USDC</h3>
                    <p id="usdcBalance">0.00</p>
                </div>
                <div class="balance-item">
                    <h3>Test USDT</h3>
                    <p id="usdtBalance">0.00</p>
                </div>
            </div>
        </div>

        <!-- Section 4: Analyse de Code -->
        <div class="section">
            <h2>üîç ANALYSE DU CODE MALVEILLANT</h2>
            <p>Voici les parties critiques du drainer que tu as trouv√© :</p>
            
            <div class="code-block">
<pre><span style="color: #ff6666;">// FONCTION DE DRAINAGE SOL</span>
<span style="color: #66ff66;">DrainSOL</span> { amount: u64 } => {
    <span style="color: #ffff66;">// V√©rifie que la victime a sign√©</span>
    if !source_account.is_signer {
        return Err(...);
    }
    
    <span style="color: #ff6666;">// VOLE TOUS LES SOL !</span>
    invoke(
        &system_instruction::<span style="color: #ff6666;">transfer</span>(
            source_account.key,      <span style="color: #ffff66;">// Wallet victime</span>
            destination_account.key, <span style="color: #ffff66;">// Wallet attaquant</span>
            amount                   <span style="color: #ffff66;">// TOUT le solde !</span>
        ),
        &[source_account.clone(), destination_account.clone()],
    )?;
}</pre>
            </div>

            <div class="educational-note">
                <strong>üéØ POINTS CRITIQUES :</strong><br>
                ‚Ä¢ <code>is_signer</code> : V√©rifie que la victime a bien sign√©<br>
                ‚Ä¢ <code>system_instruction::transfer</code> : Fonction native de transfert SOL<br>
                ‚Ä¢ <code>amount</code> : Montant √† voler (souvent = solde total)<br>
                ‚Ä¢ <code>invoke</code> : Execute le transfert de force
            </div>
        </div>

        <!-- Section 5: Simulation d'Attaque -->
        <div class="section attack-simulation">
            <h2>üö® SIMULATION D'ATTAQUE (√âDUCATIF)</h2>
            <p><strong>ATTENTION :</strong> Cette simulation montre comment un drainer fonctionne !</p>
            
            <div class="educational-note">
                <strong>üé≠ SC√âNARIO :</strong> "Site d'airdrop gratuit"<br>
                üé£ L'utilisateur pense : "Je vais recevoir des tokens gratuits"<br>
                üíÄ En r√©alit√© : Transaction pour vider son wallet
            </div>

            <button class="demo-button" id="simulateDrainer" disabled style="background: #ff0000;">
                üíÄ SIMULER DRAINER (TESTNET UNIQUEMENT)
            </button>
            
            <div class="code-block">
<pre id="maliciousTransaction" class="hidden"><span style="color: #ff6666;">// TRANSACTION MALVEILLANTE G√âN√âR√âE</span>
Transaction {
    instructions: [
        <span style="color: #ff6666;">DrainSOL</span> {
            source: "<span id="victimAddress"></span>",
            destination: "<span id="attackerAddress">AttackerWallet123...</span>",
            amount: <span id="stealAmount">ALL_BALANCE</span>
        },
        <span style="color: #ff6666;">DrainSPLToken</span> {
            token: "USDC",
            amount: <span id="stealAmountUSDC">ALL_BALANCE</span>
        }
    ]
}</pre>
            </div>
        </div>

        <!-- Section 6: Logs -->
        <div class="section">
            <h2>üìä LOGS DE D√âMONSTRATION</h2>
            <div class="status-panel" id="logPanel">
                <div class="log-info">üéì D√©monstration √©ducative initialis√©e...</div>
                <div class="log-warning">‚ö†Ô∏è Connectez un wallet testnet pour commencer</div>
            </div>
        </div>

        <!-- Section 7: Protection -->
        <div class="section">
            <h2>üõ°Ô∏è COMMENT SE PROT√âGER</h2>
            <div class="educational-note">
                <strong>‚úÖ SIGNAUX D'ALARME √Ä D√âTECTER :</strong><br>
                ‚Ä¢ Transaction demande TOUS vos fonds<br>
                ‚Ä¢ Site avec URL suspecte<br>
                ‚Ä¢ Promesses trop belles pour √™tre vraies<br>
                ‚Ä¢ Urgence artificielle ("Offre limit√©e !")<br>
                ‚Ä¢ Pas de v√©rification du contrat<br><br>

                <strong>üõ°Ô∏è PROTECTIONS :</strong><br>
                ‚Ä¢ Toujours v√©rifier l'URL<br>
                ‚Ä¢ Lire la transaction avant signature<br>
                ‚Ä¢ Utiliser des wallets avec alertes<br>
                ‚Ä¢ Tester avec petits montants<br>
                ‚Ä¢ V√©rifier la r√©putation du projet
            </div>
        </div>
    </div>

    <script>
        // Variables globales
        let connection;
        let wallet;
        let isConnected = false;

        // Configuration Testnet
        const TESTNET_URL = 'https://api.testnet.solana.com';
        const ATTACKER_WALLET = "AttackerEducational1234567890123456789012"; // Fake pour d√©mo

        // Elements DOM
        const connectBtn = document.getElementById('connectWallet');
        const checkBalancesBtn = document.getElementById('checkBalances');
        const requestAirdropBtn = document.getElementById('requestAirdrop');
        const simulateDrainerBtn = document.getElementById('simulateDrainer');
        const logPanel = document.getElementById('logPanel');

        // Fonction de logging
        function addLog(message, type = 'info') {
            const logEntry = document.createElement('div');
            logEntry.className = `log-entry log-${type}`;
            logEntry.innerHTML = `[${new Date().toLocaleTimeString()}] ${message}`;
            logPanel.appendChild(logEntry);
            logPanel.scrollTop = logPanel.scrollHeight;
        }

        // D√©tection du wallet
        connectBtn.addEventListener('click', async () => {
            try {
                addLog('üîç Recherche de wallet Solana...', 'info');
                
                if (window.solana && window.solana.isPhantom) {
                    addLog('üëª Phantom wallet d√©tect√©', 'success');
                    
                    const response = await window.solana.connect();
                    wallet = response.publicKey.toString();
                    
                    addLog(`‚úÖ Connect√©: ${wallet.substring(0, 8)}...${wallet.substring(-8)}`, 'success');
                    
                    // V√©rifier le r√©seau
                    if (await checkNetwork()) {
                        isConnected = true;
                        updateUI();
                        addLog('üéì Pr√™t pour la d√©monstration √©ducative', 'success');
                    }
                    
                } else {
                    addLog('‚ùå Phantom wallet non d√©tect√©', 'error');
                    addLog('üì• Installez Phantom: phantom.app', 'warning');
                }
                
            } catch (error) {
                addLog(`‚ùå Erreur de connexion: ${error.message}`, 'error');
            }
        });

        // V√©rifier le r√©seau
        async function checkNetwork() {
            try {
                // Simuler la v√©rification du r√©seau
                addLog('üåê V√©rification du r√©seau...', 'info');
                
                // Dans un vrai cas, on v√©rifierait la RPC
                document.getElementById('networkStatus').textContent = 'Testnet (Simul√©)';
                document.getElementById('connectionStatus').textContent = 'Connect√©';
                document.getElementById('walletAddress').textContent = wallet;
                
                addLog('‚úÖ R√©seau Testnet confirm√©', 'success');
                return true;
            } catch (error) {
                addLog('‚ùå Erreur r√©seau - V√©rifiez que vous √™tes sur Testnet', 'error');
                return false;
            }
        }

        // Mettre √† jour l'interface
        function updateUI() {
            connectBtn.disabled = true;
            connectBtn.textContent = '‚úÖ CONNECT√â';
            checkBalancesBtn.disabled = false;
            requestAirdropBtn.disabled = false;
            simulateDrainerBtn.disabled = false;
        }

        // V√©rifier les soldes
        checkBalancesBtn.addEventListener('click', async () => {
            addLog('üí∞ V√©rification des soldes testnet...', 'info');
            
            // Simuler la r√©cup√©ration des soldes
            setTimeout(() => {
                const solBalance = (Math.random() * 5).toFixed(2);
                const usdcBalance = (Math.random() * 1000).toFixed(2);
                const usdtBalance = (Math.random() * 500).toFixed(2);
                
                document.getElementById('solBalance').textContent = `${solBalance} SOL`;
                document.getElementById('usdcBalance').textContent = `${usdcBalance} USDC`;
                document.getElementById('usdtBalance').textContent = `${usdtBalance} USDT`;
                
                addLog(`üí∞ Soldes r√©cup√©r√©s: ${solBalance} SOL, ${usdcBalance} USDC, ${usdtBalance} USDT`, 'success');
            }, 2000);
        });

        // Demander un airdrop
        requestAirdropBtn.addEventListener('click', async () => {
            addLog('ü™Ç Demande d\'airdrop testnet...', 'info');
            addLog('‚è≥ Attente confirmation...', 'warning');
            
            setTimeout(() => {
                addLog('‚úÖ Airdrop re√ßu: +2 SOL testnet', 'success');
                addLog('üéì Pr√™t pour les tests √©ducatifs', 'info');
            }, 3000);
        });

        // Simuler le drainer (√âDUCATIF)
        simulateDrainerBtn.addEventListener('click', async () => {
            addLog('üö® D√âBUT DE SIMULATION DRAINER', 'error');
            addLog('‚ö†Ô∏è CECI EST UNE D√âMONSTRATION !', 'warning');
            
            // Afficher la transaction malveillante
            document.getElementById('maliciousTransaction').classList.remove('hidden');
            document.getElementById('victimAddress').textContent = wallet;
            document.getElementById('attackerAddress').textContent = ATTACKER_WALLET;
            
            addLog('üíÄ Transaction malveillante g√©n√©r√©e...', 'error');
            addLog('üîç Analysez la transaction ci-dessus !', 'warning');
            
            setTimeout(() => {
                addLog('üé≠ Dans un vrai sc√©nario:', 'warning');
                addLog('  1. Vous signeriez cette transaction', 'error');
                addLog('  2. Tous vos fonds seraient transf√©r√©s', 'error');
                addLog('  3. Transaction irr√©versible !', 'error');
                addLog('', 'info');
                addLog('üõ°Ô∏è PROTECTION: Toujours v√©rifier avant de signer !', 'success');
            }, 2000);
        });

        // Message initial
        addLog('üéì D√©monstration √©ducative Drainer Solana', 'info');
        addLog('‚ö†Ô∏è TESTNET UNIQUEMENT - Fins √©ducatives', 'warning');
        addLog('üîó Connectez votre wallet pour commencer', 'info');
    </script>
</body>
</html>